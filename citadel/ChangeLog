$Log$
Revision 1.424  1999/12/08 18:09:10  ajc
* Added CtdlRegisterServiceHook() and its data type, for implementing arbitrary
  TCP-based services directly in the Citadel server.  Not finished yet.

Revision 1.423  1999/11/29 17:39:07  nbryant
* citserver.c: Solaris lacks inet_aton; use inet_addr instead

Revision 1.422  1999/11/29 17:26:15  nbryant
* citserver.c: include <sys/types.h>; may help portability to Solaris

Revision 1.421  1999/11/22 00:27:42  ajc
* Added some temporary variables to OpenCmdResult().  Hopefully fixes
  bug #14 when running on FreeBSD.

Revision 1.420  1999/11/21 18:30:16  ajc
* Protected cmd_move() from buffer overrun (no longer crashes the server)
* cmd_chat() -- truncate input at 100 characters to prevent buffer overruns.
  Also handle broken client sockets properly.  (Thanks to DME for bug report)

Revision 1.419  1999/11/19 01:57:40  ajc
* Fixed a *serious* memory leak in the database function wrappers.
* Updated version number to 5.60 -- run setup when installing this version.

Revision 1.418  1999/11/18 03:29:20  ajc
* Changed the order of parameters in <.A>ide <S>ystem config into a more
  logical grouping.

Revision 1.417  1999/11/18 02:31:50  ajc
* Updated some of the documentation
* Brought the internal version number up to 5.60

Revision 1.416  1999/11/17 04:15:05  ajc
* Removed the session_count() function.  Instead, keep a reference count
  updated when sessions begin and end.
* Replaced fixed number of worker threads with lower and upper limits; current
  code now tries to make thread count == session count, within these limits

Revision 1.415  1999/11/15 03:17:39  ajc
* Put lockfile in /tmp instead of in /var/lock.   The latter is not guaranteed
  to exist, nor is it guaranteed to be writable by BBSUID
  (Resolves bug #11 from the Bugzilla repository)

Revision 1.414  1999/11/15 03:07:24  ajc
* Fixed the network-wide vCard purge logic so that it (1) actually works,
  and (2) forces a netproc run immediately when a purge is entered

Revision 1.413  1999/11/09 21:20:44  nbryant
* configure.in: include <sys/types.h> when doing checks which require <utmp.h>
  (should fix Bug #10 on FreeBSD)

Revision 1.412  1999/11/05 03:53:47  ajc
* Issue 'cancel' messages for vCard when a user is deleted.
* Try to delete 'cancel' messages locally after they've been distributed.

Revision 1.411  1999/11/03 04:01:20  ajc
* Fixed buffer overrun problems in cmd_rchg(), cmd_hchg(), and cmd_uchg()
* Removed my email address as the feedback content from the docs; replaced
  it with a reference to the Citadel/UX web site.

Revision 1.410  1999/11/02 19:51:23  ajc
* Fixed timeout problem for remote client sessions (all timeouts were set to
  1 second ... probably a temporary hack that was missed in the cleanup)

Revision 1.409  1999/11/02 03:03:27  ajc
* Several fixes to msgbase.c and netproc.c to prevent corrupted incoming
  network traffic from crashing the server.  Reject bad messages.

Revision 1.408  1999/11/01 04:21:34  ajc
* Fixed a concurrency bug which crashed the server when multiple sessions
  terminated simultaneously.

Revision 1.407  1999/11/01 00:54:02  ajc
* CtdlFetchMessage() - generate a "<no text>" message body if there's none
  on disk.  Too much stuff goes haywire if there's no M field.

Revision 1.406  1999/10/31 18:17:17  ajc
* Fixed buffer overrun in cmd_rchg()
* Call master_cleanup() when time_to_die==1 for proper shutdown

Revision 1.405  1999/10/31 16:26:55  ajc
* Fixed incorrect assignment of new session ID's

Revision 1.404  1999/10/31 04:17:17  ajc
* Fixed a bug which was crashing the server during very long message entry.

Revision 1.403  1999/10/29 01:48:45  ajc
* database.c: Removed arbitrary limit on maximum number of sessions

Revision 1.402  1999/10/29 01:03:03  ajc
* Debugged all possible ways for a session to terminate; do them cleanly.
* Assign session numbers in a more portable and less arbitrary way.

Revision 1.401  1999/10/28 19:50:55  ajc
* Fixed a problem where the client protocol would spit out two responses
  and therefore get out of sync if ASUP command set the access level to
  0 and therefore deleted the user (thanks to Eric McDonald)

Revision 1.400  1999/10/28 05:08:49  ajc
* Removed all of the thread cancellation cruft that is no longer necessary
* Moved the now non-system-dependent RemoveContext() out of sysdep.c (now
  it's part of cleanup() in citserver.c)
* Removed all references to pthread_* from all modules except sysdep.c

Revision 1.399  1999/10/28 03:20:17  ajc
* Fixed the problem of worker threads waking up prematurely.
* 'QUIT'-terminated sessions now exit properly.

Revision 1.398  1999/10/27 04:26:58  ajc
* Initial hack of worker-thread rearchitecture.  Right now it is successfully
  dispatching worker threads to active client sockets (and to the master
  socket too, of course).  Removing sessions is currently broken.

Revision 1.397  1999/10/26 20:20:29  ajc
* Removed the auto-reconnect stuff... it was locking the client in an active
  loop more often than it was reconnecting.

Revision 1.396  1999/10/26 13:59:11  ajc
damn bugs

Revision 1.395  1999/10/26 03:48:39  ajc
* Shuffled around the order of events when a thread is terminating.  All
  mutex operations now happen prior to the freeing of the CitContext structure,
  otherwise begin_critical_section() and end_critical_section() try to
  manipulate the context's mutex count when there isn't any context.

Revision 1.394  1999/10/26 03:21:16  ajc
* Changed a lot of strncpy() calls to safestrncpy() and replaced most of their
  hardcoded size arguments with 'sizeof' based arguments.

Revision 1.393  1999/10/24 19:22:51  nbryant
	* Makefile.in, configure.in: added --enable-icq flag; made checks for
	  authentication libraries more intelligent.

Revision 1.392  1999/10/23 03:39:12  ajc
* Finished moving vCard functionality to the new message base functions.

Revision 1.391  1999/10/21 00:50:14  ajc
* Finished up the flags and replication checks in CtdlSaveMsgPointerInRoom().

Revision 1.390  1999/10/20 16:46:27  ajc
* More code shuffle.  Added some flags to CtdlSaveMessagePointerInRoom() and
  enabled the MOVE command to also do a "copy" operation (actually just
  creates a second link and bumps the ref count).  Implemented "<C>opy" in
  the client.

Revision 1.389  1999/10/20 16:07:48  ajc
* Wholist fixes for users who are in chat mode

Revision 1.388  1999/10/20 03:42:29  ajc
* In the wholist, only show <private room> if the user viewing the list
  doesn't know that room.  Otherwise show the name.

Revision 1.387  1999/10/20 02:59:22  ajc
* Code reorganization.  Making it easier to move/copy messages without
  duplicating existing code.

Revision 1.386  1999/10/17 02:25:18  ajc
* Discovered a huge design flaw in the replication algorithm.  Ripped it
  out and replaced it with something a bit more robust.

Revision 1.385  1999/10/16 05:30:17  ajc
* Changes to message replication code.  Don't do server-side hooks during
  an ENT3 command.  Also fixed a bug in cmd_whok() that caused crashes
  after a file format change.

Revision 1.384  1999/10/14 03:04:16  ajc
* Finished the netproc side of Z (zap/supersede) processing for replication

Revision 1.383  1999/10/13 04:24:18  ajc
* Added search-by-header-fields to CtdlForEachMessage(), and then to the
  server MSGS command.  This will have lots of uses.

Revision 1.382  1999/10/13 01:36:39  ajc
* Starting some work on network zap (supersede) mode for replication

Revision 1.381  1999/10/08 02:55:57  ajc
* More vCard-related debugging

Revision 1.380  1999/10/07 02:58:46  ajc
* Semi-broken vCard replacement implementation in place.
* Added "Z" (Zap, supersede) field to message format

Revision 1.377  1999/10/04 03:19:52  ajc
* We now have a housekeeping thread and a housekeeping queue.

Revision 1.376  1999/10/03 21:48:21  ajc
* Added serv_upgrade.h to automagically convert pre-5.55 format user records
  to 5.55 format user records and generate vCards.

Revision 1.375  1999/09/29 21:13:17  ajc
* CtdlWriteObject() can now store objects in personal rooms for any specified
  user -- rather than only the current user or non-personal rooms.

Revision 1.374  1999/09/29 17:26:56  ajc
* serv_vcard.c: fixed crashola bug in cmd_greg()
* tools.c: simplified and improved the string tokenizer.  Now it runs in a
           single pass with no intermediate buffer.

Revision 1.373  1999/09/28 03:27:37  ajc
* Fully migrated cmd_greg() and cmd_regi() into serv_vcard (still has bugs)

Revision 1.372  1999/09/27 03:33:40  ajc
* cmd_regi() is now in serv_vcard and writes to the vcard instead of to the
  usersupp file.  Still needs tweaking.

Revision 1.371  1999/09/24 03:32:19  ajc
* "read my vCard" and "write my vCard" are written and tested.

Revision 1.370  1999/09/24 02:54:17  ajc
* Worked a little more on the vCard stuff.  The serv_vcard module is now in
  place, and a "read my vcard" function is there; "write my" is next...

Revision 1.369  1999/09/23 03:07:56  ajc
* The vCard 'class' is now linked into the server, though it's not really
  functional yet.  Its constructors/destructors are debugged, though.

Revision 1.368  1999/09/19 21:28:33  ajc
* Finished off the message architecture stuff with a new class of hooks to
  enable future server-side handlers.

Revision 1.367  1999/09/19 15:57:06  ajc
* migrated cmd_ent3() to CtdlSaveMessage()

Revision 1.366  1999/09/19 05:13:57  ajc
* Debugged the new version of CtdlWriteObject()

Revision 1.365  1999/09/16 03:23:23  ajc
* Did most of the migration from save_message() to CtdlSaveMsg().  The
  latter builds a "struct CtdlMessage" (so we can run server-side handlers
  against it later on), then serializes it and stores to disk.
* BROKEN BUILD ALERT!!  cmd_ent3() and CtdlWriteObject() are still not
  migrated.  They are stubbed out and will MALFUNCTION if used right now!!

Revision 1.364  1999/09/07 01:42:42  ajc
* cmd_msg3() now uses serialize_message() for its output.  All message
  commands will eventually exist as a "struct CtdlMessage" at some point
  so that we can install server-side handler hooks.

Revision 1.363  1999/09/07 00:04:13  ajc
* netproc.c: put outgoing messages into the use table, too -- this prevents
  locally originated messages from showing up again if a remote system is
  misconfigured and spools them back to us.

Revision 1.362  1999/09/06 03:39:15  ajc
* citadel.c: run strproc() on new passwords

Revision 1.361  1999/09/03 17:50:26  playcow
For URL view, don't prompt user to select url if there is only one.  Display
<U>RL View prompt if message contains url(s). -Ben

Revision 1.360  1999/09/02 02:09:59  ajc
* msgbase.c: new function serialize_message() for future use

Revision 1.359  1999/09/01 21:09:25  ajc
* database.c: display the GDBM version string on startup

Revision 1.358  1999/09/01 02:36:34  ajc
* Actually _enforce_ the max msg len limit

Revision 1.357  1999/09/01 01:51:48  ajc
* Added the ability to handle embedded URL's from the text client

Revision 1.356  1999/09/01 01:02:47  ajc
* Implemented "maximum message length" in global system config

Revision 1.355  1999/08/31 00:57:17  ajc
* Handle multipart/alternative properly during legacy message outputs.
  Basically it just prints the first alternative and skips the rest.

Revision 1.354  1999/08/29 21:12:24  ajc
* Made some changes to the output of MIME (especially multipart) messages.

Revision 1.353  1999/08/29 19:56:43  ajc
* HTML updates

Revision 1.352  1999/08/24 02:01:03  ajc
* html.c: added.  This is an overly simplistic HTML-to-text converter.

Revision 1.351  1999/08/21 18:37:29  ajc
* Minor cosmetic cleanup.  No code changes.

Revision 1.350  1999/08/21 05:15:34  ajc
* mailinglist.c, netmailer.c: fixed to allow list submissions from all posters
  on a Citadel network rather than only on the local system.

Revision 1.349  1999/08/08 00:25:45  ajc
* Made one more byte available in locate_host() and in all the structs which
  its output gets written to (client can display 24 positions but we were only
  saving 23).

Revision 1.348  1999/08/07 16:34:38  nbryant
* serv_icq.c: warning fixes

Revision 1.347  1999/08/06 02:57:26  ajc
* locate_host.c: use strdoop() and phree() instead of strdup() and free()
* serv_icq.c: run learned IP's through Citadel's locate_host() & put in Wholist

Revision 1.346  1999/08/05 17:58:59  ajc
* RWHO command now returns express message code in postion 3

Revision 1.345  1999/08/04 02:21:45  ajc
* Fixed some bugs in the ICQ metaclient, and documented the new protocol cmds

Revision 1.344  1999/08/03 11:34:35  ajc
* Added client_icq.c and client_icq.h

Revision 1.343  1999/08/03 03:14:51  ajc
* Wrote the client side of the ICQ gateway.  Now on to other projects.  :)

Revision 1.342  1999/08/03 01:52:06  ajc
* Redesigned the client protocol commands for dealing with ICQ
* Implemented page function priority ordering to prevent pages from being
  simultaneously delivered over multiple IM systems
* Migrated serv_icq.* into the Makefile

Revision 1.341  1999/08/01 21:36:30  ajc
* EXTREME coolness.  The server side of the ICQ metaclient is now working.
  It is set up using ICQL and ICQA commands, it automatically logs the user
  onto ICQ along with Citadel, and displays all non-offline ICQ contacts
  in the Wholist.

Revision 1.340  1999/07/31 07:18:01  ajc
* Restructured the express message infrastructure, adding a class of function
  hooks for the addition of multiple paging modules with message routing

Revision 1.339  1999/07/30 22:20:19  ajc
* Applied bugfix patches contributed by Vaggelis Tsirkas:
  * rooms.c: buffer overrun fix
  * room_ops.c: cmd_rdir() now behaves better when directory doesn't exist

Revision 1.338  1999/07/30 03:32:24  ajc
* Added strdoop(), a leak-checked version of strdup()
* Small fixes to new API functions in msgbase.c
* ICQ metaclient stores/reads config using the message base API functions

Revision 1.337  1999/07/29 03:36:37  ajc
* msgbase.c: reorganized.  output_message() now uses CtdlFetchMessage(),
  cmd_msg3() now fetches directly from disk and spews to the client.

Revision 1.336  1999/07/28 04:02:37  ajc
* Server modules are now labelled with their RCS ID instead of a complex and
  manually-updated data structure.

Revision 1.335  1999/07/28 03:50:24  ajc
* serv_expire.c: expire-by-age now calls CtdlFetchMessage() instead of
  calling output_message() in MT_DATE mode.
* msgbase.c: removed MT_DATE mode ('twas a sleazy hack)

Revision 1.334  1999/07/27 22:47:26  ajc
* Implemented new data type "CtdlMessage" which will eventually be used as
  widely as possible to represent a message in memory.
* Implemented CtdlFetchMessage() which is intended to become the back-end to
  output_message() as well as a bunch of other things.

Revision 1.333  1999/07/27 20:00:24  ajc
Removed all references to CC->msglist and CC->num_msgs, and all utility
functions which relied upon them.  Citadel Is Now Better.

Revision 1.332  1999/07/27 19:32:22  ajc
Removed serv_upgrade.c and all references to it in Makefile.in
Reworked new-mail-count to not use MessageFromList() etc.

Revision 1.331  1999/07/25 02:59:37  ajc
Fixed reference count problem in cmd_move()

Revision 1.330  1999/07/24 22:50:38  ajc
Continued replacing references to [get|put]_msglist() with better code.
For some reason, cmd_msgs() still doesn't always work right.

Revision 1.329  1999/07/24 22:16:41  ajc
Experimenting with automatic updating of ChangeLog by CVS.  Simply twiddle
ChangeLog a bit (i.e. by adding or removing a newline from the end of the
file) before issusing "cvs commit", and the comments recorded by CVS will
automatically appear at the beginning of ChangeLog.

Revision 1.328  1999/07/24 22:14:21  ajc
cmd_move() now uses CtdlDeleteMessages().
WARNING: build is temporarily broken.  Currently removing all references
to the "msglist" kept in CitContext.  It's ugly and must die.

Thu Jul 22 22:26:50 EDT 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Moved message deletion into new API function CtdlDeleteMessages()
	* Added CtdlWriteObject() to store generic data in the msgbase
	* Fixed really dumb error that prevented network msgs from posting

Tue Jul 20 22:14:54 EDT 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Moved the actual work done in cmd_msgs() into a new API function
	  called CtdlForEachMessage() which is supplied a callback function.

Mon Jul 19 23:24:18 EDT 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Keep the (unqualified) content-type in the SuppMsgInfo record.  We'll
	  be using this shortly to search rooms for specific object types.

Sun Jul 18 14:53:16 EDT 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us> 
	* Changes to dynloader et al to handle ICQ module being written
	* serv_icq.c, serv_icq.mk: added (separate makefile is temporary)

1999-07-17 Nathan Bryant <bryant@cs.usm.maine.edu>
	* chkpwd.c: DELETED CVS REVISION 1.3 (backed out Art's last change)
	  use 'cvs update -r 1.2 chkpwd.c; cvs update -A chkpwd.c' NOW to
	  avoid problems with working directories.
	* Makefile.in: don't install chkpwd setuid if make install isn't
	  being run as root.
	* citadel.spec: chmod u+s chkpwd during %install stage

Fri Jul 16 18:39:04 EDT 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* PEXP and GEXP no longer trip the idle time display
	* Fixed bug which duplicated incoming private mail to Trashcan
	* Improved auto-reconnect by NOT using SIGPIPE and longjmp(); also
	  implemented a 15 second delay to wait for a crashed server to restart
	* Relaxed the security check in chkpwd.c a bit; it was just flat-out
	  preventing logins on my system otherwise

Thu Jul 15 22:57:32 EDT 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* eliminate redundant "name" parameter in [l]putuser(), now uses
	  usbuf->fullname to guarantee the correct name for the index

1999-07-12 Nathan Bryant <bryant@cs.usm.maine.edu>
	* Makefile.in, configure.in: link netproc with gdbm
	* netproc.c: only include gdbm.h if HAVE_GDBM_H
	* user_ops.c: warning fix

Mon Jul 12 19:51:30 EDT 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Mail is now saved in both sender and recipient mailboxes.  This is
	  structured in a way that will allow a separate "outbox" room and/or
	  multiple recipients in the future.

Sun Jul 11 18:46:48 EDT 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* netproc.c: msgfind() no longer uses the timestamp as a message-ID
	  when no other message-ID is available (it screws up the loopzapper)
	* room_ops.c: eliminate room name parameter in putroom() and its ilk;
	  get data from quickroom.QRname instead; prevents incorrect indexes
	* Tentative implementation of "personal rooms" (user-private namespace)
	* Added supplementary message info records for info that may change
	  at some time later than when the message is saved (i.e. ref counts)
	* Implemented msg reference count increment/decrement; delete messages
	  whose reference count reaches zero

Wed Jul  7 23:25:09 EDT 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* control.c: create citadel.control if it doesn't exist (yikes!)
	* serv_expire.c: purge mailbox rooms belonging to non-existent users
	* user_ops.c: don't delete user's mailbox at user-delete time

Mon Jul  5 17:01:29 EDT 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* utilsmenu: removed menu items for defunct utilities

Mon Jun 28 16:24:10 EDT 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Changed any remaining references to UUCP, to "Internet" instead.

Thu Jun 24 11:13:23 EDT 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* added server command line option "-f" to defrag databases on startup
	* control.c: better performance and reliability in [get|put]_control()
	* netproc.c: Finished the loopzapper

Mon Jun 21 00:04:15 EDT 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* netproc.c: started writing a vortex checker.  Not finished.

Wed Jun  9 23:34:25 EDT 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Replaced all code that generated temporary filenames with calls to
	  tmpnam().  Rewrote using tmpfile() where possible.

Thu Jun  3 11:35:18 EDT 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* base64.c: mapped fi and fo to stdin and stdout using
	  actual code rather than assignment at declaration time
	  (several users of Red Hat Linux 6.0 reported problems)

Fri May 21 20:05:00 EDT 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Added function CtdlGetDynamicSymbol() for dynamic symbol allocation
	* server.h: Changed discrete #define's to enum's where appropriate
	* sysdep.c: Changed the startup message to give credit to the whole
	  development team :)  Also made the message more GNU-ish.

Thu May 20 20:01:30 EDT 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* database.c: print log messages for file defragmentations
	* citserver.c: implemented CtdlAllocUserData() and CtdlGetUserData()
	  for arbitrary per-session data storage (by modules etc.) without
	  having to add fields to struct CitContext
	* msgbase.c: removed "desired_section" from struct CitContext and
	  implemented it using CtdlGetUserData() as a test.

Wed May 19 19:30:28 EDT 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* commands.c, commands.h, routines.c: began color scheme changes

1999-05-15 Nathan Bryant <bryant@cs.usm.maine.edu>
	* configure.in: Added untested support for BSDI 4.x.

1999-05-13 Nathan Bryant <bryant@cs.usm.maine.edu>
	* acconfig.h, configure.in, routines.c: fix for certain SYSV variants
	  which lack utmp.ut_host
	* citadel.h, file_ops.c, msgbase.c, netproc.c, serv_chat.c: fix
	  namespace collision with <sys/stream.h> on aforementioned SYSV
	  variant
	* configure.in, getutline.c: check for paths.h
	* configure.in, Makefile.in: check for -lsocket and -lnsl

1999-05-11 Nathan Bryant <bryant@cs.usm.maine.edu>
	* chkpwd.c: fixed excessive paranoia; it used to refuse to run when
	  invoked by root and BBSUID != 0
	* Makefile.in: ignore errors while installing /etc/pam.d/citadel

1999-04-27 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* file_ops.c: fixed NDOP to not crash the server if it has trouble
	  with a download file
	* netpoll.c: upped default packet size

Mon Apr 26 22:06:57 EDT 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Repaired IGnorant security hole blunder re. citmail

Sun Apr 25 12:44:08 EDT 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* serv_chat.c: notify user of number of participants upon entering chat
	* Built the 5.53 distribution

Wed Apr 21 22:23:13 EDT 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* aidepost.c: add -r flag to allow posting to rooms other than Aide>
	* serv_expire.c: now posts transcripts of all auto-purged rooms/users

Tue Apr 20 12:45:55 EDT 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* messages.c: downloading more than MAX_MSGS messages now truncates
	  (off the beginning of the list) rather than crashing.

Mon Apr 19 12:11:48 EDT 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* whobbs.c: auto-detect when being called from a webserver, and act
	  as a CGI (print HTTP headers and HTML output)

1999-04-18 Nathan Bryant <bryant@cs.usm.maine.edu>
	* serv_chat.c: fixed some potential buffer overruns (thanks dme)

Wed Apr 14 21:32:28 EDT 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Makefile.in: chmod 4755 citmail to prevent citmail from aborting
	  when called from sendmail due to citadel.config security check

1999-04-13 Nathan Bryant <bryant@cs.usm.maine.edu>
	* dynloader.c: OpenBSD places underscores in front of symbol names
	* Makefile.in: fixed a few sillies
	* aidepost.c, citmail.c, file_ops.c, logging.c, msgbase.c, netmailer.c,
	  netproc.c, rcit.c, routines.c, serv_upgrade.c: fixed time_t handling
	  (have to cast it to long for printf/scanf)

Mon Apr 12 22:13:26 EDT 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* aidepost.c: rewrote to unlink temp file before writing to it so that
	  it will automatically go away if interrupted. Also ran indent -kr -i8

1999-04-12 Nathan Bryant <bryant@cs.usm.maine.edu>
	* configure.in, Makefile.in: taught it how to generate OpenBSD shared
	  libraries
	* config.c, sysdep.c: fix -h option not setting proper modules dir
	* configure.in, citadel.spec: make --enable-chkpwd the default
	* setup.c: don't chown chkpwd

1999-04-11 Nathan Bryant <bryant@cs.usm.maine.edu>
	* configure.in: another OpenBSD fix, but we're still not quite there yet
	* serv_chat.c: warning fix

Thu Apr  8 22:51:28 EDT 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* config.c: now requires a setup run for *any* rev level difference
	* Updated docs & confs for 5.53b1 release
	* setup.c: sets the 0600 permission bits on citadel.config that
	  is checked for in config.c

1999-04-08 Nathan Bryant <bryant@cs.usm.maine.edu>
	* citserver.c: improved is_public_client(), also if a public_client
	  only supplies a numeric address, attempt to resolve it
	* locate_host.c: verify that the forward DNS matches the reverse
	* locate_host.c, locate_host.h: more general interface
	* configure.in, acconfig.h: fixes for Digital UNIX

Wed Apr  7 21:36:16 EDT 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Implemented "access level required to create rooms" (client & server)

1999-04-07 Nathan Bryant <bryant@cs.usm.maine.edu>
	* configure.in: updated help messages, OpenBSD support
	* setup.c: if /etc/inittab doesn't exist, don't ask to create an
	  entry in it
	* server.h, sysdep.c: fix a potential deadlock/data corruption bug
	* room_ops.c: fixed the 'gdbm error: Illegal data' message when
	  deleting a room which had never been posted to
	* user_ops.c: include errno.h
	* dynloader.c: fix for OpenBSD

1999-04-06 Nathan Bryant <bryant@cs.usm.maine.edu>
	* Makefile.in, configure.in, getutline.c, sysdep.c:
	  fixes/bug workarounds for FreeBSD

1999-04-03 Nathan Bryant <bryant@cs.usm.maine.edu>
	* Makefile.in, configure.in, chkpwd.c, acconfig.h: support for
	  `chkpwd', a setuid helper program for machines which use shadow
	  passwords (configure --enable-chkpwd)
	* Makefile.in, configure.in, auth.c, citadel.pam, user_ops.c: support
	  for PAM or shadow passwords (configure --with-pam)
	* Makefile.in: made some messages simpler
	* citadel.spec: updated for 5.53; correct name of tarball; build with
	  --enable-chkpwd and --with-pam; add defattr tags so rpm's can be
	  built by non-root user
	* commands.c: cosmetic cleanup
	* config.c: (security/paranoia) check permissions on citadel.config
	* configure.in: check for ncurses if we can't find curses
	* dynloader.c: warning fix
	* sysdep.c: don't complain if initgroups() fails
	* citadel.c: fix systems with SYSV-style signal handling (e.g. libc5)
	* Makefile.in: New! Improved! Cleaner! Shinier!

Sun Mar 21 14:21:47 EST 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* messages.c: cosmetic cleanups to message reading loop

Sat Mar 13 21:33:19 EST 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* commands.c: use bright colors by default in color mode
	* citserver.c: initialize wholist fields with (not logged in) etc.

1999-03-08 Nathan Bryant <bryant@cs.usm.maine.edu>
	* sysdep.c: call DLoader_Init() with an absolute path so that gdb can
	  find module symbols
	* database.c: bail out if opening databases fails

Sat Mar  6 01:55:55 EST 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* serv_chat.c: use memfmout(), *not* cprintf() to transmit express
	  messages.  Calling cprintf() on strings >256 bytes crashes the server
	* msgbase.c: minor logging fix in save_message()

1999-03-05 Nathan Bryant <bryant@cs.usm.maine.edu>
	* sysdep.c: add undocumented -r flag to citserver to prevent it from
	  dropping root permissions.
	* sysdep.c: also drop supplementary groups

1999-03-04 Nathan Bryant <bryant@cs.usm.maine.edu>
	* config.c: error checking in put_config()
	* setup.c: chgrp files to the login group associated with BBSUID
	* sysdep.c: copyright 1987-1999; drop root perms; load modules and call
	  master_startup() after dropping perms

Wed Mar  3 00:00:55 EST 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Prevent buffer overruns in lowercase_name in [get|put]user()
	* client_chat.c: use citedit() for page composition

Sat Feb 27 07:47:36 EST 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* rooms.c: download_to_local_disk() prompts for a filename if a blank
	  filename was supplied to it (for attachments without names)
	* mime_parser.c: strip leading whitespace in content_type & disposition

1999-02-24 Nathan Bryant <bryant@cs.usm.maine.edu>
	* configure.in: improved check for pthreads
	* configure.in, routines.c, acconfig.h: check for ut_type in struct utmp
	* configure.in, Makefile.in: support for building server modules as
	  relocatable objects for BSDI (which still uses a.out *gag* *choke*)
	* configure.in: compiler choice & flags for BSDI; check for libtermcap
	* database.c: don't use a critical section in open_databases()
	* housekeeping.c: use getfloor()/putfloor() instead of
	  lgetfloor()/lputfloor() in check_ref_counts()
	* mime_parser.c: include <errno.h>
	* msgbase.c: include <limits.h>
	* sysdep.c: hacks for BSDI. use signals to fake thread cancellation;
	  don't call master_cleanup() directly from signal handler.
	* routines.c: prototype getutline() if necessary
	* getutline.c: stupid bugfix
	* acconfig.h, configure.in, locate_host.c, server.h: work around
	  nonreentrant gethostbyaddr() on BSDI

Mon Feb 15 22:59:00 EST 1999 Vaggelis Tsirkas
	* citadel.c: increased hostname buffer size to handle very big names

1999-02-15 Nathan Bryant <bryant@cs.usm.maine.edu>
	* sysdep.c(main): initialize alen before call to accept()

1999-02-04 Nathan Bryant <bryant@cs.usm.maine.edu>
	* configure.in: improved check for cygwin
	* configure.in, routines.c: access utmp directly instead of calling
	  `who' if getutline() is available.
	* configure.in, Makefile.in, getutline.c: replace getutline() on
	  systems which don't have it
	* routines.c: now always access utmp directly unless we can't find
	  utmp.h

1999-02-02 Nathan Bryant <bryant@cs.usm.maine.edu>
	* Fixes for Cygwin:
	  - ifdef out file download methods that require named pipes (client)
	  - include pthread.h and gdbm.h only if they are present (fixes
	    auto dependency generation)
	  - include snprintf.h where needed
	  - handle .exe suffixes for "make install"

Tue Feb  2 22:15:08 EST 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Overhauled the express messaging system (again)

Mon Feb  1 19:48:04 EST 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* messages.c: implemented client download of MIME attachments

Sun Jan 31 18:29:18 EST 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Added qpdecode.c to the distribution (decodes quoted-printable)
	* Finished the MIME parser
	* Gave MSG0 a reasonable behaviour for MIME messages
	* Added the OPNA command for downloading attachments

Sat Jan 30 18:39:53 EST 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Look for citadel.rc in current directory if not found elsewhere
	* More work on the MIME parser
	* Added base64.c to the distribution

1999-01-29 Nathan Bryant <bryant@cs.usm.maine.edu>
	* fixes for IRIX (thanks to wr and family for use of the Indy):
	  - use memset()/memcpy() instead of bzero()/bcopy() in all cases
	  - configure updates
	  - handle `long' pid's
	  - a few other little bits

Mon Jan 25 21:23:07 EST 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Fixed bug in save_message() which crashed the server on mail to sysop
	* Rewrote pop_march() to be smarter about <G>oto heuristics

Sat Jan 23 14:32:19 EST 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Changed internal storage of express messages from a linked list to
	  a single, resizable buffer.
	* Added a "room order" key to the room record, to allow some control
	  over room listing order.
	* Made the room list commands aware of the room order key.
	* Overhauled <G>oto heuristics to pay attention to floor & room order

Wed Jan 20 19:21:51 EST 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Added some more code to the unfinished MIME parser
	* Changed module loading path to simply "modules" because after calling
	  get_config(), the cwd is guaranteed to be the correct BBS directory.

Tue Jan 19 21:28:29 EST 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Fixed a bug in the user editing command (client side)
	* Started a rewrite of the MIME parser

Thu Jan 14 21:21:15 EST 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Brought over the mime_parser from WebCit and began preliminary work
	  on supporting MIME format messages.

Tue Jan 12 22:30:00 EST 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Various changes to begin work on support for MIME messages
		- Defined format type 4 for MIME
		- msgbase.c: *temporary* hacks in output_message() for Type 4
		- citmail.c: added more robust header parsing, and support
		             for Type 4.  Also eliminated the crappy built-in
		             SMTP server.
		- Updated some of the technical documentation

Sun Jan 10 13:34:36 EST 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Fixed access to page log room

Fri Jan  8 12:35:09 EST 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* control.c: include <limits.h> to fix PATH_MAX undefined
	* serv_chat.c: made the following changes to cmd_sexp() --
		* Send zero-length message to check only, don't send
		* Send "-" message on the command line to invoke
		  the SEND_LISTING transfer mode for a multi-line message
	* Added facilities to log all pages to a room (site configurable)

Tue Jan  5 23:24:52 EST 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Replaced all occurances of malloc(), realloc(), and free() in the
	  server and server-modules with mallok(), reallok(), and phree().
	  Wrote macros and a set of leak-tracking functions.

Sun Jan  3 20:38:45 EST 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Documentation changes

Fri Jan  1 01:01:45 EST 1999 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Fixed security problem relating to private rooms

Wed Dec 30 20:10:52 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* sysdep.c: put a bigger string buffer into lprintf() to avoid overruns

Sat Dec 26 16:56:46 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* internetmail.config: commented this file more clearly

Wed Dec 23 20:42:49 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* citadel.c: added some experimental code to automatically reconnect
	  to the server if the connection is broken.  For some reason, it only
	  works once.

Wed Dec 23 18:47:12 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* sysdep.c: ignore SIGPIPE.  This keeps broken connections from
	  crashing the whole server.
	* Tagged everything for the official 5.50 release.

Mon Dec 21 07:54:20 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* housekeeping.c: call kill_session() with session_to_kill,
	  not ccptr->cs_pid (was crashing the server)

Sat Dec 19 13:57:48 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Added "-i" flag to netproc to make it skip the export phase.
	  Updated other programs to call netproc in this way when appropriate.
	* Updated network.txt to reflect the usage for netproc (which has
	  been wrong for several releases)

Thu Dec 17 00:17:04 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Started removing the word "beta" from the docs and code.
	  Preparing for an actual release.
	* msgbase.c: generate an 'I' field when requested (i.e. on locally
	  originating messages.  this was breaking parts of the network)

1998-12-15 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* msgbase.c: remove extra call to alias() which was causing
	  Citadel-to-Citadel mail to fall into the bit bucket.
	* msgbase.c: fixed tempfile naming problem that could cause a new
	  outgoing netmail message to overwrite another if netproc had not been
	  run in between

1998-12-14 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* More session table stability nonsense

Sun Dec 13 17:40:08 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* sysdep.c, citserver.c: (hopefully) fixed a session table concurrency
	  bug which was causing the server to occasionally crash.
	* removed serv_test.so from the default build

Fri Dec 11 18:50:00 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* setup.c: default value for maxsessions is now 0 (no limit)
	* room_ops.c: don't allow users to create a room called "Mail"
	* serv_expire.c: fixed "number of messages purged" display
	* commands.c: when using color, default to low-intensity colors

Tue Dec  8 07:58:16 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Beta 2

Sat Dec  5 01:24:03 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Added a new type of module hook for adding logging functions
	* Removed whitespace to left and right of '@' in netmail recipients
	* sysdep.c: read citadel.config _before_ initializing loadable modules
	* stats.c: fixed segfault resulting from extracting log lines
	* Ripped most of the "attachments" stuff out of both the client and
	  server.  (Thought of a better way to handle it ... LATER.)

1998-12-03 Nathan Bryant <bryant@cs.usm.maine.edu>
	* setup.c: create citadel.config with mode 0600
	* Makefile.in: don't chmod sendcommand
	* serv_upgrade.c: don't create citadel.config if it doesn't already
	  exist (paranoia)
	* setup.c: saner defaults for nodename and fqdn

Wed Dec  2 20:37:05 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* msgbase.c: modified AddMessageToRoom() and all functions that call it
	  to use a more reliable/accurate method to set quickroom.QRhighest
	* weekly.in: don't sort/purge filedir where filedir doesn't exist

1998-12-02 Nathan Bryant <bryant@cs.usm.maine.edu>
	* weekly is now generated by configure

Mon Nov 30 19:48:52 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* room_ops.c: added sort_msglist() to move and save operations
	* sendcommand.c: added (also updated utils.txt, weekly, Makefile.in)
	* BETA 1

Sun Nov 29 23:57:39 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Fixed cmd_regi() to not display a second result code after xfer
	* Makefile.in: Removed "chmod 4755 citmail netmailer"

1998-11-23 Nathan Bryant <bryant@cs.usm.maine.edu>
	* citadel.spec: added

1998-11-22 Nathan Bryant <bryant@cs.usm.maine.edu>
	* Makefile.in: split install target into install-exec, install-data,
	  and install-doc subtargets

Sat Nov 21 16:53:30 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Added a fourth color mode in the client: "user" which turns color
	  on or off according to a per-user flag stored on the server.  Added
	  server-side support for this too, of course.
	* import.c: removed
	* serv_expire.c: finished the code to purge stale visits
	* sysdep.c: strip trailing nonprintables in client_gets()
	* routines2.c: fixed <.AS> command; all configs now work properly
	* Moved num_parms() and all the extract() type functions into tools.c
	  and removed them from all other files.  Linked in tools.[o|ro] there.
	* netproc.c: handled incoming file transfers to correct room directory
	* room_ops.c: fixed incorrect naming of files in info and images dirs

Fri Nov 20 20:29:07 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* setup.c: removed all prompts that can be configured from within the
	  client in order to simplify the setup procedure

Thu Nov 19 23:28:33 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Fixed serv_upgrade.c and export5.c (found elsewhere) to use a new
	  export format which treats visits as a separate section
	* serv_expire.c: began writing functions to purge rooms and visits
	  (neither work yet), and added a way to call defrag_databases()

Wed Nov 18 23:51:17 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Reimplemented 'visit' structs stored globally instead of as
	  lists-per-user

Tue Nov 17 22:37:48 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Started implementing global room numbers.

Sun Nov 15 20:32:34 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* room_ops.c: mailbox rooms always appear on the main floor
	* made QR_MAILBOX rooms non-editable
	* cmd_setr() delete old room record when room name changes
	  (This causes a big mess that exposes a flaw in the whole design.)
	* room_ops.c: users can delete messages from their mailboxes

Thu Nov 12 23:59:13 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Rewrote cmd_rchg() and also increased the size of the "fakename"
	  buffer.  Overruns are probably what was causing the crashes.
	* Changed the way cmd_ent3() handles mail messages; the previous code
	  rerouted all private mail to the trash.

Wed Nov 11 17:57:39 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* citserver.c: slight changes to cmd_rchg() and cmd_hchg() [crashes]
	* citserver.c, msgbase.c, user_ops.c: hide the owner-prefix of mail
	  rooms in a couple more places: set_wtmpsupp() and make_message()
	* sysdep.c: added an fflush() to lprintf() for "tail -f"-able logs
	* serv_expire.c: purge ops are now a command instead of a cleanup
	  function.  This is probably temporary as well.
	* citadel.c: fixed the way <.WL> parses the returned data from a
	  TIME command.

1998-11-11 Nathan Bryant <bryant@cs.usm.maine.edu>
	* serv_upgrade.c: fix uninitialized variable

Wed Nov 11 00:47:32 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* msgbase.c: fixed a bug that was misrouting incoming network msgs
	* server.h, database.c: wrapped all GDBM calls in critical sections
	  to avoid making those calls re-entrantly (gdbm fatal: lseek error)

1998-11-10 Nathan Bryant <bryant@cs.usm.maine.edu>
	* Makefile.in: link in snprintf.o where needed

1998-11-09 Nathan Bryant <bryant@cs.usm.maine.edu>
	* client_chat.c: eliminate calls to sprintf()
	* commands.h, routines.c, routines2.c: warning fix
	* commands.c, control.c, cux2ascii.c, file_ops.c, import.c,
	  ipc_c_tcp.c: eliminate sprintf() calls

Mon Nov  9 19:15:31 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* serv_upgrade.c: added all missing fields to export/import
	* serv_expire.c: support per-user purge time when purging users
	* user_ops.c: added per-user purge time to AGUP and ASUP commands
	* routines.c: added more stuff to <.A>ide <E>dit user

Sun Nov  8 22:56:53 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* serv_expire.c: created; moved message expiry from serv_test.c,
	  moved user purge from userpurge.c
	* userpurge.c: deleted
	* routines2.c: finished <.AS> command
	* room_ops.c: fixed Aide room access (for some reason, the Aide
	  room had the QR_MAILBOX flag set)

1998-11-08 Nathan Bryant <bryant@cs.usm.maine.edu>
	* useradmin.c: really removed (cvs remove)
	* aidepost.c, citadel.c: convert all sprintf() calls to snprintf()
	* sysdep.c: fix overrun in lprintf() described by dme/Dead Monkey
	* citmail.c, citserver.c: convert all sprintf() call to snprintf()

Sun Nov  8 13:19:36 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* useradmin.c: removed
	* utils.doc: removed references to useradmin and sysoputil

Fri Nov  6 20:22:20 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* citadel.h (and related files): removed defunct parameters,
	  c_defent and c_msgbase (erase your test bbs)
	* Implemented CONF server command for site-global configs
	* Shuffled yesno() and yesno_d() from routines.c to commands.c
	* commands.c: implemented boolprompt()
	* routines2.c: started adding CONF questions to <.AS> command
	* room_ops.c: began a fix for the mysterious disappearing Aide room

1998-11-05 Nathan Bryant <bryant@cs.usm.maine.edu>
	* snprintf.c: warning fix propagated over from gcit

1998-11-04 Nathan Bryant <bryant@cs.usm.maine.edu>
	* added RCS Id keyword strings to sources
	* citmail.c: reverted to version 1.10

Wed Nov  4 10:53:13 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* messages.c: temporarily set screenwidth to a fixed value of 80
	  during <P>rint operations.

Mon Nov  2 12:59:03 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* setup.c: looks for 'citadel', 'bbs', or 'guest' in /etc/passwd to
	  try to get a default for bbsuid if it's currently set to 0
	* citmail.c: changed usersupp.eternal to usersupp.usernum (why didn't
	  it complain about this before?)
	* serv_upgrade.c: began writing an "export" command to do sidegrades

Sun Nov  1 18:47:42 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* serv_upgrade.c: cosmetic changes
	* Implemented message expiry by date (this really needs to be moved
	  out of serv_test.c, but where does it belong?)

1998-11-01 Nathan Bryant <bryant@cs.usm.maine.edu>
	* serv_upgrade.c: warning fixes
	* acconfig.h: remove ANSI_COLOR
	* Configure, Makefile.tmpl: removed

Sat Oct 31 20:48:44 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* More stoopid ANSI colour additions here and there.
	* ANSI colour selection is now in citadel.rc instead of an option in
	  the configure script.  "on" "off" and "auto" are available.
	* added "build.txt" to the techdoc directory, with LS's build notes

1998-10-31 Nathan Bryant <bryant@cs.usm.maine.edu>
	* citadel.c, commands.c, commands.h: set background color to black
	  before clearing screen, so that we can actually see text on
	  black-on-white xterms.

1998-10-29 Nathan Bryant <bryant@cs.usm.maine.edu>
	* rooms.c: fix color of Mail>
	* citadel.c: send ANSI detect sequence after attach_to_server() so the
	  terminal doesn't send the answerback sequence to the shell if we
	  can't connect.

Wed Oct 28 20:20:14 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us
	* citadel.c: Added a splash of colour to the Wholist

1998-10-28 Nathan Bryant <bryant@cs.usm.maine.edu>
	* configure.in: added comments
	* mkinstalldirs: new file to be used for `make install'
	* aclocal.m4, missing: new files, also swiped from automake
	* citadel.c: don't mung the terminal if we can't find citadel.rc
	* Makefile.in: added `install' target, `clean' removes
	  *.mo, rebuild configure when configure.in changes.
	* configure.in: check for install and autoconf
	* configure.in, Makefile.in: only pass -fPIC to gcc
	* policy.c: warning fix for OSF/1 (use memset() instead of bzero())

Tue Oct 27 22:25:42 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Unified the "unpacked database" format for both upgrades and
	  sidegrades (also see export5.c elsewhere)
	* citserver.c: clear out cmdbuf before reading a command; some server
	  commands were accidentally extracting parameters from previous cmds
	* rooms.c: removed the warning about the ineffectiveness of kicking
	  users out of public rooms, because the new server can do lockouts

1998-10-27 Nathan Bryant <bryant@cs.usm.maine.edu>
	* sysdep.c (client_gets), ipc_c_tcp.c (serv_gets): improved handling
	  of long lines. 
	* Makefile.in: partial support for VPATH builds, autodependency fix

Tue Oct 27 00:08:16 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* minor documentation changes

Sun Oct 25 14:57:40 EST 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* messages.c: fixed an oversight that was allowing attachments even
	  when disabled in citadel.rc

1998-10-25 Nathan Bryant <bryant@cs.usm.maine.edu>
	* routines2.c: warning fix

Sat Oct 24 22:07:56 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Client: added message expiration policy questions to room edit
	* Client: added <.A>ide <S>ystem configuration command

1998-10-24 Nathan Bryant <bryant@cs.usm.maine.edu>
	* Makefile.in: Auto dependency generation (may require GNU make, but
	  does at least function without this feature on OSF/1 make);
	  Makefile is regenerated when Makefile.in changes (ditto);
	  `realclean' is now known as `distclean';
	  portability fixes for older Unix make utilities
	* citadel.c, citadel.h, commands.c: make client suspendable

Fri Oct 23 19:34:38 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* setup.c: default node name is now obtained from uname()
	* config.c: added put_config()
	* policy.c: added, moved GetExpirePolicy() from room_ops.c
	* policy.c: implemented cmd_gpex() and cmd_spex()

Wed Oct 21 22:24:48 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Mail rooms now hide their owner-prefix from the client.
	* proxy.c: added configurability and primitive message expiry

1998-10-20 Nathan Bryant <bryant@cs.usm.maine.edu>
	* Makefile.tmpl: fix to build client with old Configure script
	* configure.in: autologin defaults to enabled if crypt() is available
	* room_ops.c: fix improper null-termination bug I introduced

Mon Oct 19 20:52:55 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Client ability to force display of prompts in Mail rooms, even when
	  the user has prompting turned off (citadel.rc option)

1998-10-16 Nathan Bryant <bryant@cs.usm.maine.edu>
	* sysdep.c (cprintf): generate a newline on truncated buffer
	* room_ops.c: exploitable overrun fixes

Thu Oct 15 19:27:32 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* msgbase.c: reimplemented cmd_move()
	  room_ops.c: wrote AddMessageToRoom() which is used for both entering
	  and moving messages.
	* setup.c: system-default message expire policy of "number of
	  messages, 150" is now a default configuration instead of a temp hack
	* proxy.c: cache dir create now dies on any error except EEXIST

Wed Oct 14 22:41:16 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Misc code cleanup

1998-10-13 Nathan Bryant <bryant@cs.usm.maine.edu>
	* configure.in: don't check for -lcrypt unless autologin is enabled
	* file_ops.c: fix another overrun

Mon Oct 12 15:27:21 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Killed the "rooms" subdirectory (it isn't used anymore)
	* dynloader.c: Made dynamically added server commands case-insensitive
	* import.c is now serv_upgrade.c, a module
	* Removed most of the "level 9" trace messages no longer needed

1998-10-12 Nathan Bryant <bryant@cs.usm.maine.edu>
	* Makefile.in: simplified to use pattern rules; files compiled with
	  -D_REENTRANT go to *.ro to allow the same files to be used with both
	  client and server
	* tools.c, tools.h: new files; misc routines used by both client and
	  server go here. contains safestrncpy() at the moment.
	* rooms.c: fix several exploitable buffer overruns
	* sysdep.c: fix infinite loop when long lines are received from the
	  client; fix exploitable buffer overrun in cprintf()
	* ipc_c_tcp.c: fix infinite loop on long line from server
	* serv_upgrade.sh: remove uncnsrd-dependent absolute path
	* .cvsignore: add *.ro

Sun Oct 11 23:17:48 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Built some more of the message expiry infrastructure

1998-10-11 Nathan Bryant <bryant@cs.usm.maine.edu>
	* citserver.c: fix two more overruns, one of which was preventing
	  the "From Host" from showing up in the <W>ho listing.

Sun Oct 11 02:51:55 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Moved "struct visit" and its associated defs from citadel.h to
	  server.h where they belong
	* Set up data structures for room policies (expiry, etc.)

1998-10-10 Nathan Bryant <bryant@cs.usm.maine.edu>
	* citserver.c: fix overrun which caused segv's on servers with long
	  hostnames.

Fri Oct  9 18:34:06 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* user_ops.c: added PurgeStaleRelationships() to do processing at
	  session logout time to remove visits for rooms which no longer exist
	* user_ops.c: implemented NewMailCount()

1998-10-09 Nathan Bryant <bryant@cs.usm.maine.edu>
	* serv_chat.c: fix buffer overrun that was resulting in segv's
	* serv_chat.c: fix another overrun that could cause sessions to hang,
	  and cleaned up some other strncpy()-related stuff. DON'T FORGET TO
	  NULL-TERMINATE DESTINATION BUFFERS AFTER STRNCPY CALLS.

Fri Oct  9 13:22:37 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Implemented "lazy mode" traversal - pressing the space bar will do
	  <N>ext messsage, <G>oto next room, or read <N>ew as appropriate.
	* room_ops.c: modify CtdlRoomAccess() to allow access to mailbox rooms
	  only to their owners.

Thu Oct  8 17:13:27 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* messages.c, citadel.rc: added the ability to display message numbers
	  in the header when reading messages.  I think this is butt ugly, but
	  some of the DaveCode afficionados seem to like it...

Thu Oct  8 15:34:45 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* room_ops.c: Added is_noneditable() function to replace all of the
	  duplicated code present in all functions which edit room parameters.

1998-10-08 Nathan Bryant <bryant@cs.usm.maine.edu>
	* lots of warning fixes; builds with -std1 on dec unix
	* aidepost.c, citadel.h, citmail.c, file_ops.c, msgbase.c, netmailer.c,
	  netproc.c, rcit.c, server.h, stats.c, userlist.c: use time_t where
	  needed
	* control.c, room_ops.c, serv_chat.c, sysdep.c: use memset() instead of
	  bzero()
	* dynloader.c, dynloader.h, messages.c, server.h, sysdep.c,
	  sysdep_decls.h: function pointer/prototyping fixes
	* rooms.c: use mkfifo(3) instead of system("mkfifo")

1998-10-07 Nathan Bryant <bryant@cs.usm.maine.edu>
	* snprintf.c, snprintf.h: new files
	* Makefile.in, configure.in, dynloader.c, sysdep.c: support for the
	  above; citserver now builds and runs on Digital Unix 4.0d with the
	  GNU-style configure script. there is a bug with the hostname display
	  in the wholist.
	* netproc.c: sillyness fix
	* room_ops.h: prototype delete_room()
	* client_chat.c, commands.c, serv_chat.c, sysdep.c:
	  use HAVE_SYS_SELECT_H macro

Mon Oct  5 17:01:32 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Began fixing the stuff I broke

Sun Oct  4 23:35:18 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Did the big migration to the new data structures.  Lots of stuff is
	  now broken.  Basic moving from room to room works, but Mail is
	  broken, and some of the administrative commands are unimplemented.

1998-10-02 Nathan Bryant <bryant@cs.usm.maine.edu>
	* configure.in: autologin now defaults to disabled

Fri Oct  2 00:04:31 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Finally removed all three usersupp.foo[MAXROOMS] elements, and
	  migrated all the code that used them to use "struct visit" instead.

Thu Oct  1 23:02:20 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Rewrote [l][get|put]room() functions to use room names rather than
	  room index numbers.  Temporarily prepended a "n" to these four
	  function names until they are put to use.

Thu Oct  1 16:27:13 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Removed a few more references to usersupp.lastseen[]

1998-10-01 Nathan Bryant <bryant@cs.usm.maine.edu>
	* .cvsignore: add so_locations (generated by osf1 ld with shared libs)
	* Makefile.in: restructured variables for greater consistency, use
	  @echo to print out notices during the make process, add so_locations
	  to `cleaner'
	* configure.in, Makefile.in: configure checks for -rdynamic
	* ipc_c_tcp.c: fix DEC compiler warning wrt unsigned char
	* stats.c: add semicolon to placate DREC compiler
	* user_ops.c: define _POSIX_C_SOURCE, include <limits.h>
	* configure.in: pass -pthread to DEC compiler, don't check for
	  libpthread[s] on DEC Unix

1998-09-30 Nathan Bryant <bryant@cs.usm.maine.edu>
	* Makefile.in: new variable PTHREAD_DEFS for portability
	* aidepost.c, citadel.c, citmail.c, mailinglist.c, msgform.c,
	  netmailer.c, netpoll.c, netproc.c, rcit.c, readlog.c, setup.c,
	  stats.c, userlist.c, whobbs.c: return type of main() is int
	* citadel.c, commands.c, messages.c: use time_t properly
	* citserver.c: include <limits.h>
	* config.guess, config.sub, install-sh: new files
	* configure.in: don't use gcc on Digital Unix

Tue Sep 29 23:17:34 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* room_ops.c: modified usergoto() to look at the new data structures
	  for counting new messages and such.

1998-09-29 Nathan Bryant <bryant@cs.usm.maine.edu>
	* user_ops.c: fix compiler warning and potential memory leak,
	  include sysdep.h
	* configure.in, Makefile.in: only build the server if we find pthreads
	* Makefile.in: realclean removes config.{cache,log,status}

Tue Sep 29 13:20:14 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Removed code from some of the utilities which was still attempting
	  to access the old non-gdbm data store.
	* housekeeping.c: rewrote check_ref_counts() to do a ForEachRoom()
	  traversal instead of a MAXROOMS loop.
	* sysdep.c: set up a dummy CitContext record to be used during server
	  startup, during which time there is no real context.

Mon Sep 28 23:51:51 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Implemented the function ForEachRoom() to handle all-rooms traversal
	  (this will work with both the old and new paradigms, because both
	  use a GDBM database with one room per record).  Migrated all room
	  list commands to use it.

Mon Sep 28 22:05:35 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Implemented the function CtdlRoomAccess() to handle *all* of the
	  user-access-to-rooms functionality.  Migrated all room list commands
	  to use it.  Still need to migrate gotos.

1998-09-28 Nathan Bryant <bryant@cs.usm.maine.edu>
	* configure.in, acconfig.h: new files; partially functional GNU
	  autoconf configure script. Run autoheader; autoconf; ./configure
	  --prefix=`pwd` to test.
	* Makefile.tmpl: new file; this is what Makefile.in used to be. Used by
	  Configure.
	* Makefile.in: modified to work with autoconf-style configure script
	* Configure: modified to use Makefile.tmpl and generate autoconf-style
	  macros. Removed procfs detection. Pass -O2 to gcc, -O to other
	  compilers. Removed mknod/mkfifo detection; code should use mkfifo(3).
	* citmail.c, msgform.c, netproc.c, routines.c, support.c, userlist.c,
	  whobbs.c: use HAVE_STRERROR macro rather than NO_STRERROR
	* commands.c: use HAVE_TERMIOS_H macro rather than POSIX_TERMIO
	* netproc.c: remove procfs stuff. simply attempt to kill the target
	  process with signal zero instead; this checks whether the process
	  exists.
	* setup.c, useradmin.c: use HAVE_CURSES_H macro

Sun Sep 27 23:41:29 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* BOTH the old and new generation systems are being written to at
	  this point.  Code that reads stuff is still using the old system.

Sun Sep 27 16:10:49 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Changed all "generation" variables from char to long, in preparation
	  for removing MAXROOMS.  Generations for new rooms are now timestamps.
	* Defined "struct visit" to hold user/room relationships.
	* Removed some #define's from citadel.h that are no longer used.

Wed Sep 23 13:41:49 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* More changes to support attachments.  They mostly work, but only
	  in fixed-format messages.

Mon Sep 21 21:19:17 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* msgbase.c: began laying the groundwork to support attachments.
	  Purchased Rogaine(tm) in preparation for expected hair loss.

1998-09-21 Nathan Bryant <bryant@cs.usm.maine.edu>
	* msgbase.c: include dynloader.h
	* citadelapi.h: removed
	* dynloader.h: prototype CtdlRegisterUserHook()

Sun Sep 20 18:56:37 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Added a UserFunctionHook category to implement hooks which perform
	  operations on various users or usernames

Fri Sep 18 21:14:41 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* citserver.c: removed cmd_extn() and related code

1998-09-18 Nathan Bryant <bryant@cs.usm.maine.edu>
	* user_ops.c: include dynloader.h
	* roomstats.{c,mk}: removed
	* Configure, Makefile.in: autodependency-related fixes

Thu Sep 17 22:55:29 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Various changes to allow "new messages" to work correctly with Mail

Thu Sep 17 22:21:45 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* server.h, dynloader.c, citserver.c, user_ops.c: reduced the number
	  of hook types by inventing an EventType field to the Session hook.
	* proxy.c: added pre-fetching

1998-09-17 Nathan Bryant <bryant@cs.usm.maine.edu>
	* Makefile.in: add SERV_MODULES and PROXY_TARGETS to `cleaner'
	* dynloader.[ch], serv_{chat,test}.[ch], sysdep.c: cleaned
	  up the dynamic loader interface as follows:
	  - all the symbol table stuff is gone.
	  - modules are loaded once at server startup and never unloaded.
	  - Added a new function CtdlRegisterProtoHook() to handle the stuff
	    that was being done with the symbol tables.
	  - Dynamic_Module_Init() now returns a pointer to a static struct
	    DLModule_Info; this structure itself has been modified to use char*
	    fields instead of fixed char arrays.
	* roomstats.c: include <stdarg.h> not <stdargs.h> (is this file still
	  in use?)
	* Configure, Makefile.in: added autodependency support

Wed Sep 16 22:25:13 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Implemented separate structs, lists, and functions for each type
	  of server-side hook available.

1998-09-16 Nathan Bryant <bryant@cs.usm.maine.edu>
	* ipc_c_tcp.c: Fixed up some #include/prototyping stuff, call memcpy()
	  instead of bcopy()
	* hooks.h: removed
	* sysdep.c, user_ops.c: removed reference to hooks.h

Wed Sep 16 11:42:42 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* ipc_c_tcp.c: Reversed any changes that have been made to this file,
	  because something was causing abominally slow response time.
	* proxy.c: added.  This will eventually become a caching, pre-fetching
	  multiuser proxy server for the Citadel protocol.

1998-09-15 Nathan Bryant <bryant@cs.usm.maine.edu>
	* Makefile.in: remove support.o from serv_chat.so, add -fPIC to compile
	  flags for serv_chat.o
	* dynloader.c: include "sysdep_decls.h", use RTLD_NOW not RTLD_LAZY
	* dynloader.h: prototype CtdlRegisterHook()
	* .cvsignore: added data

Mon Sep 14 20:49:08 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Tried my hand at adding the ability for server extensions to
	  register various types of "hooks" in addition to just adding
	  server commands.  This is probably not final.

Tue Sep  8 12:11:56 EDT 1998 Brian Costello <btx@calyx.net>
	* Added support for dynamic server modules.  Reworked serv_chat.c
	  to be such a module.

Tue Sep  1 23:09:50 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* userpurge.c: rewrote using functions from the server core, rather
	  than the now-defunct external API.  This'll be ready once the module
	  loading code is done.  (I just had to commit _something_ tonight.)

Mon Aug 31 22:47:58 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Yanked the citadelapi.c module.  This wasn't working out well.
	* techdocs/citadelapi.txt - began documenting the new API to be used
	  by modules which will be dynamic linked into the server - most of
	  this API is existing server functions.
	* Added a ForEachUser() function with callback mechanism, and reworked
	  cmd_list() to use it.

Sun Aug 30 21:52:43 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Moved all of the gdbm databases to a separate "data" directory.

1998-08-26 Nathan Bryant <bryant@cs.usm.maine.edu>
	* Makefile.in: realclean removes Makefile, fixed `touch citadel.h'
	  problem

1998-08-25 Nathan Bryant <bryant@cs.usm.maine.edu>
	* room_ops.c: include time.h
	* userlist.c, whobbs.c, serv_chat.c, user_ops.c, sysdep.c, stats.c,
	  citadel_decls.h, commands.c, messages.h, routines.h, routines2.h:
	  remove duplicated declarations

Mon Aug 24 23:45:01 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* setup.c: Removed yesno_s()
	* citadel.h, room_ops.c: added QRmtime field to struct quickroom,
	  modified whenever a room is modified or posted in.
	* citadelapi.c: Added CtdlForEachRoom() function

Mon Aug 24 20:04:04 EDT 1998 Nathan Bryant <bryant@cs.usm.maine.edu>
        * Makefile.in: new target `cleaner' does the same as `realclean' 
          without removing sysdep.h
	* proto.h: is bad. eliminate. I've moved the prototypes into several
	  header files, one per .c file

Mon Aug 24 00:45:55 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Added a CtdlGotoRoom() function to the CitadelAPI.
 
Sun Aug 23 21:47:00 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* sysoputil is finally dead!  Removed it from the build.
	* Added userpurge.c server extension (initial implementation)

Tue Aug 18 00:42:33 EDT 1998 Nathan Bryant <bryant@cs.usm.maine.edu>
	* Makefile.in: `clean' target no longer rm's sysdep.h; new target
	  `realclean' removes everything clean does, plus sysdep.h, plus
	  target binaries.
	* Configure: add -Wstrict-prototypes to CFLAGS for gcc systems
	* *.[ch]: protoized. Added several new header files containing
	  prototypes and other external declarations; many duplicated
	  declarations still should be moved to header files. proto.h must die
	  as well, IMHO.

Mon Aug 17 23:52:13 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Implemented a bunch of user account related functions in the
	  CitadelAPI library.

Mon Aug 17 20:01:18 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Fixed the crash problem.  It wasn't AGUP/ASUP, but rather a buffer
	  overrun in getuser() (thanks, Nathan).  Implemented overrun checks
	  in getuser(), getroom(), and getfloor() to prevent future problems.

Mon Aug 17 00:06:52 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Updated citmail.c with the latest stuff from the production system.
	* Implemented AGUP and ASUP commands, but AGUP crashes the server
	  after its first successful use (user-not-found's don't affect it).

Thu Aug  6 19:25:01 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Got the CitadelAPI library to the point where the server can start
	  up an extension, and the extension will connect to the server, do
	  some initialization, call a user-supplied CtdlMain(), and exit.  Also
	  hacked together a _temporary_ form of the new EXTN server command.
 
Wed Aug  5 23:02:22 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Second attempt at getting the server API started.  Now it runs
	  outside of the server and builds a connection.

Tue Aug  4 18:33:06 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Modified the appearance of Internet addresses when they arrive on
	  a Citadel system.
	* Removed the <E> field from the message format writeup in hack.txt.
	* Fixed-up citmail.c so that it doesn't try to do database lookups.

Mon Aug  3 23:01:37 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Started developing the server-side API.  This is in its very
	  initial stages.  See serverapi.c and techdoc/api.txt

1998-08-02  Nathan Bryant  <bryant@cs.usm.maine.edu>
	* Makefile.in: added config_decls.h to dependencies

Sun Aug  2 21:09:09 EDT 1998 Nathan Bryant <bryant@cs.usm.maine.edu>
	* config_defs.h: renamed to config_decls.h
	* config.c, sysoputil.c: updated to reflect the above

Sun Aug  2 18:52:05 EDT 1998 Nathan Bryant <bryant@cs.usm.maine.edu>
	* config_defs.h: new file, contains external declarations from config.c
	* config.c: moved defs to config_defs.h, use PATH_MAX from <limits.h>
	  for bbs_home_directory
	* mailinglist.c, support.c: include <string.h>
	* sysoputil.c: include <string.h>, <limits.h>, "config_defs.h", remove
	  duplicated defs, replace gets() call with fgets()
	* user_ops.c: define _XOPEN_SOURCE_EXTENDED

Sat Aug  1 18:32:52 EDT 1998 Nathan Bryant <bryant@cs.usm.maine.edu>
	* ipc_c_tcp.c: fixed order of memcpy parameters after gethostbyname

Sun Jul 19 17:26:12 EDT 1998 Nathan Bryant <bryant@cs.usm.maine.edu>
	* ChangeLog: reordered; the GNU standard is to add new entries to the
	  top.
	* .cvsignore: added userlist

Sun Jul 12 20:58:59 EDT 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
        * Finished migrating everything to the new data store.
        * Replaced the binary "calllog" with the ASCII "citadel.log"
        * Began converting broken utilities that depend on the old data store

Sat Jul 11 00:20:48 EDT 1998 Nathan Bryant <bryant@cs.usm.maine.edu>
	* Makefile.in: removed msgstats

Fri Jul 10 1998 Art Cancro <ajc@uncnsrd.mt-kisco.ny.us>
	* Initial CVS import 

