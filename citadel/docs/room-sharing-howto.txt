                      Citadel/UX Networking Documentation
                          (A brief overview on setup)
                  Written by Steve Williams (Patriot @ pixel)


   Having come this far, you're ready to set up your networked rooms.  In
and of itself it's not too difficult.  I would suggest telnetting to
another Citadel/UX and checking out what they offer.  Currently,
uncnsrd.mt-kisco.ny.us and dogpound2.citadel.org and pixel.citadel.org
are your best bets.

Below is a list of the networked rooms (most of them) that PixelBBS
carries.  Note the ) after each room name.  This designates that room as a
networked room.

   Rooms with no new messages on Networked Rooms:
A/V Talk)  Creation/Evolution)  babylon 5)  Jokes)  Networking)
Astronomy) Books: Sci-Fi)  Food)  MP3 Universe)  TrekNet)  PaganNet)
net.Religion) Music)  Programming)  Uncensored Magic)  Politica)  Movies)
Video Games) Star Wars)  Linux)  Pets)  Swagazine)  Global Address Book)
Sports) Slimies 2000)  Science Fiction)  Sysop Stuff)  Raising Kids)
Unix) Hot Pink Amoebas)  Dreams)  Buy/Sell)  Tech Area)  Citadel
Development) Linux Today)  Citadel/UX)  Gay/Lesbian)  Of the Weird)
Magic-The Gathering) The Local Net)  Books)  Netlinks)  Software 
Questions)  SCA) Abortion) NASA News)  Misheard Lyrics)  Snausages)
Macintosh)  Gateway) Microsoft Bashing)  IGnet Unlimited)  BBS Ads)




Basically networking your citadel is a very good idea, because not only do
you have your own userbase to add to your rooms, you also have input from
every other networked Citadel/UX and some other varieties of Citadel as
well (Citadel-86, Cit:K2NE, etc), which dramatically increases the
topical posting.  So now you're saying, "Ok, I know what it is now, how do
I set the damned thing up?"  Good question. There are several steps to
take.  Actually setting up the networked rooms is simple so we'll do that
last.  The first thing you need to do is to find another network node to
share with.  The best way to do this (at this time) is to send mail to
smw@pixel.citadel.org.  For the time being I'll share my rooms with just
about anyone as I have the bandwidth currently to accomplish this.  Now,
for the step by step:


 1.  Determine from the list above (I have most of the networked rooms
     listed, however I have no idea or way of knowing how often new rooms
     will be added) or from another networked citadel, which networked rooms
     you would like.

 2.  Contact me, or the sysop on another networked citadel (login to the
     bbs and send mail to recipient Sysop), asking to share those rooms with
     you.

 3.  From your Citadel/UX home directory (eg. /home/citux/citadel) run the
     program ./dnetsetup.  Here it gets a little confusing so I'll paste
     in the actual menus where possible:


    **********************************************************************
    *                       Citadel/UX Network Setup                     *
    *                                                                    *
    * ****************************************************************** *
    * *               EDIT    View or change a network node            * *
    * *               ADD     Add a new network node                   * *
    * *               DELETE  Delete a network node                    * *
    * *               EXIT    Exit from Network Setup                  * *
    * ****************************************************************** *
    *                                                                    *
    **********************************************************************

    **********************************************************************
    *                        <  OK  >      <Cancel>                      *
    **********************************************************************





  As you can see above the menu choices are fairly clear.  Lets go
through the steps to actually setting this up.

 First, you'll need to add your network node.  A node is the other Citadel/UX
that is going to share rooms with you.

 Select A, then type in the name of your remote node, EXACTLY as that node's
administrator has given it to you.  In the case of PixelBBS that would be:

  pixel

 Note that the standard Citadel/UX convention is to use all lowercase.  Using
uppercase in the set up of your Citadel/UX has a tendency to do weird things
like broadcast your net messages in triplicate, for example.

Once you've added your network node, tab down to 'ok' and dnetsetup will
take you back to the main screen.  From here you need to edit your
network node.  Select option "E"dit and you should only have one node
listed at this point:

     Select the node you wish to edit
***********************************************
*                   pixel                     *
***********************************************

***********************************************
*	    <OK>		<Cancel>      *
***********************************************


Hit ok, at this point.  You'll be given another list of options:


                Editing pixel
************************************************
*          LIST    List currently shared rooms *
*          SHARE   Add a shared room           *
*          UNSHARE Stop sharing a room         *
*          EXIT    Return to main menu         *
************************************************


This list is fairly self evident, but I'll explain it anyhow:

           LIST    shows you all the rooms you've setup to network with
                   this node.
           SHARE   allows you to ADD a networked room to network with this
		   node.
           UNSHARE Stops networking specified rooms with this node.


Simple enough, right?  Ok, let's add a room.  Remember that list of
networked rooms?  It's a good idea to have printed that out at this
point.  Here's where the fun begins.  I'm only going to show how to add
one room, all the rest you can do yourself.

Select "S"HARE:

	Enter name of room to share:
********************************************
*House of Pork				   *
********************************************


********************************************
*        <OK>   <Cancel>                   *
********************************************

 Select ok, and bang, you've setup up the first portion of networking.
 Special note:  The case of the rooms must be EXACT, so watch your
 capitalization!!


 When you're all finished adding the networked rooms that you'd like to
 share, jump out to the main menu and exit.  You've finished (almost) with
 the networking part.  Now we have to create the new rooms on the bbs
 itself.


  4.  Login to your BBS and type .er (. Enter a new Room).
      We'll assume for sake of argument that you are creating a publicly
      accessible, non directory, networked room:

Lobby>	. Enter a new Room
Name for new room? House of Pork (again, watch your case!)
<?>Help
<1>Public room
<2>Guess-name room
<3>Passworded room
<4>Invitation-only room
Enter room type: 1
"House of Pork", a public room.
Install it? (y/n) : Yes
(0 messages)
House of Pork>

 Ok great.  We've created it.  Now, let's make it a networked room.  Note
 that at the end of the roomname we've got a > instead of a ).
 When editing a room all options in [] are defaults, and you can simply
 hit enter to accept them.

. Aide Edit this room
Room name [House of Pork]:
Private room [No]?
Preferred users only [No]?
Read-only room [No]?
Directory room [No]?
Permanent room [No]? Yes
                      (note that directory and networked rooms are ALWAYS
                       permanent, by default, however just to be safe,
                       select 'y'es here.)
Network shared room [No]? Yes
Automatically make all messages anonymous [No]?
Ask users whether to make messages anonymous [No]?
		      (note:  This assumes that the networked rooms you're
		       creating is NOT an anon room)
Room aide (or 'none') [none]:
                      Up to you, on this one.
Save changes (y/n)? Yes
Ok.

 There.  You've created and edited a network room.  You'll note that the
 name's changed from: House of Pork> to House of Pork).  Once you see the
 ) you've done it. :)



 There ya go.  You've now successfully shared and created a node and a
 network rooms.  All set.

 Well no.  Firstly you need to make sure that you've been shared on the
 other node.  Make sure and check on it, before going any farther.  We'll
 assume for sake of argument that everything's set up on your remote node
 and you're all ready to go.

 There are two commands that are ABSOLUTELY vital for processing your
 networked messages.  These are:

  netproc
  netpoll

 Netproc simply takes any messages that you've placed in a networked room
 on your BBS and spools them to an outbound queue:

  ~bbs/network/spoolout

 netpoll is the command that actually goes out to your remote network node
 and snags new messages.  Once it has them it brings them back into Citadel/UX
 and parses them out to their proper rooms.  Simple enough.

 The command netproc runs by itself, no flags needed.  To run netpoll,
 you need to know a little bit about your remote node.

 What port is Citadel/UX running on?  (Normally 504, but there are some strange
 people out there)
 What is the networking password?

 Once you have those, polling for your messages is easy, provided
 everything's been set up properly.  Syntax for netpoll:

 netpoll bbs.address.org Citadel/UX port # networking password

 Eg: netpoll pixel.citadel.org 504 netpswd

 (No the above is NOT my password.  We'll get into that later.)

 Once you run netpoll as stated above this should happen:
200 pixel Citadel/UX server ready.
Connected to: pixel (PixelBBS) Christiana, DE
200 authenticated as network node 'yournodename'
200 483
200 Ok
200 Ok

 What this says is that you've connected to the pixel server
 and that you've gotten the right password.
 483 is the byte count of the messages that are coming down to you.
 The rest is stating that your messages have been uploaded and that
 you've terminated connection with the server.  At this point you
 should check your networked rooms on the BBS and see what new messages
 await.
 You might want to automate this procedure by running it as a cron task.

 Here's mine:

 # Citadel/UX netprocessing tool
 0,15,30,45 * * * * /home/citux/citadel/netproc > /dev/null 2>&1
 # Citadel/UX network message sender/receiver
 5 * * * * /home/citux/citadel/netpoll dogpound2.citadel.org 504 netpswd > /dev/null 2>&1

 I hate having messages pop up everytime netproc/netpoll runs so I
 redirect the output to /dev/null.
 Every 15 minutes netproc runs and processes outbound messages.
 At 5 minutes after each hour netpoll sends all messages and imports new
 ones.

 At this point we're all done.  Oh I admit that you might run into
 some problems, and if you do you can feel free to mail
 smw@pixel.citadel.org with the subject Citadel Problems.


  Visit PixelBBS at:pixel.citadel.org, login as bbs.
  Or, if you prefer:  http://pixel.citadel.org:2000

 -Steve Williams (Patriot)
