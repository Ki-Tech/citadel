  


Site Configuration
by IGnatius T Foobar (Art Cancro)

    Once your Citadel server is up and running, the first thing you'll
want to do is customize and tune it.  This can be done from the
text-based client with the .Aide System configuration General command,
or from WebCit (if you have it installed) by clicking "Advanced Options"
followed by "Edit site-wide configuration."   This document will show the
text client being used, but the available set of options are the same
either way. 

    The first set of options deal with the identification of your system. 
  

 Lobby> . Aide System configuration General
 Node name [uncnsrd]: 
 Fully qualified domain name [uncnsrd.mt-kisco.ny.us]: 
 Human readable node name [Uncensored]: 
 Modem dialup number [US 914 244 3252]: 
 Geographic location of this system [Mount Kisco, NY]: 
 Name of system administrator [IGnatius T Foobar]: 
 Paginator prompt [<jinkies!  more text on the next screen!>]: 
  


For "node name" you should enter the "short" node name of your system.  It
is used in a number of places, most notably for routing of messages
across a Citadel network. Citadel will attempt to set the default value
to the unqualified host name of your computer. 

Then enter the fully-qualified domain name [FQDN] of your system.  If you
are not on the Internet, you can simply set it to the same as your
unqualified host name. Otherwise you should
set this value to the host name by which your system is most commonly known. 

The field "Human-readable node name" is also called the "node title" or
"organization name."  It is used primarily for display purposes.  Set it to 
the actual name of your system as you want it to appear. 

If you have a modem or bank of modems answering data calls for your
system, enter it in the field marked "Modem dialup number."  Otherwise
you may make something up.  This is used for interoperability with older
Citadel-86 systems which use a telephone number for node identification. 

"Geographic location of this system" is another display field.  Enter a 
city and state, or city and country. 

"Name of system administrator" is important!  Any user who logs on with 
the name you enter here will automatically be granted Aide privileges.
This is one of two ways for the system administrator to grant
himself/herself Aide access to the system when initially setting it up.  (The
other is simply to have the first account created on a new installation.) 
  

    The next set of options are your system's security settings.  Before
delving into the actual options, we should review the various access
levels available on the system.  Citadel has seven access levels: 

     0 (Deleted).  A user whose access level is set to 0 will
       automatically be deleted by the system. 
     1 (New User).   Users at this level may only read messages.  Entering
       messages is prohibited, except in the Mail> room, where a message
       to 'sysop' may be entered. 
     2 (Problem User).  Also known as "Twit." 
     3 (Local User).  May enter messages, except in rooms shared on a  
       Citadel network. 
     4 (Network User).  May enter messages in every accessible room. 
     5 (Preferred User).  Use of this level is up to the whim of the
       system administrator. 
     6 (Aide).  Access is granted to the administrative functions of the
       system.  (This access level may also be granted to a user only for
       a specific room, please see "Room Aide" for
       more information.) 


 Require registration for new users  [No]: No 
 Initial access level for new users [4]: 
 Access level required to create rooms [4]: 
 Automatically give room aide privs to a user who creates a private room [No]: No 
 Automatically move problem user messages to twit room  [Yes]: Yes 
 Name of twit room [Trashcan]: 
 Restrict Internet mail to only those with that privilege  [No]: No 
 Name of room to log pages [Page Log Scandal]: 
  


"Registration" refers to the process of a user entering various personal
contact information (real name, address, telephone number, etc.) into the
system.  When enabled, this information is stored as a vCard object on
the system in two places: the user's  My Citadel Config>  room, and in
the  Global Address Book> room.  (Note: the latter should be made private
on publicly-accessible systems, for obvious reasons.) 

If you answer Yes to "Require registration for new users" then each new
user, upon creating a new account, will immediately be entered into the
registration process. 

"Initial access level for new users" should be set to 1 (New User) if you  
would like to review each new user's registration info before granting
them higher access.  This would be done periodically with the <.A>ide
<V>alidate-new-users command.   If you do not require registration, you
should set the initial access level to 4 (Network User). 

"Access level required to create rooms" is up to you.  You might wish to
restrict the creation of new rooms only to Aides, or you might wish to
allow anyone to create a room.  The latter is one of the Citadel
culture's most long-standing traditions; the former may be appropriate if
users are abusing this privilege. 

You have the ability to "Automatically give room aide privs to a user who  
creates a private room."  If you answer Yes, then any user who creates a
guess-name, passworded, or invitation-only room will automatically become
the room aide, and will have access to a subset of the <.A>ide command
set while in that room.  If you would rather grant this permission  
manually, answer No. 

Another tradition in the Citadel culture is to refrain from deleting 
problem users, but instead to "twit" them (reduce their access level to 2
[Problem User]).   You can then "Automatically move problem user messages
to twit room" (answer Yes, then specify "Name of twit room" and remember
to create that room).  If you employ this logic, any user with level 2
(Problem User) access will continue to have access to the same set of
rooms, but all messages posted will automatically be routed to the
Trashcan (or whatever you call your twit room). 

If you have the Internet mail gateway installed, you have the option of
restricting its use on a user-by-user basis.  If you wish to do this,
answer Yes to "Restrict Internet mail to only those with that privilege." 

"Name of room to log pages" is where you can specify a room to which all  
pages (also called express messages or instant messages) will be logged.
You may wish to do this for security reasons. 
  

    The next set of options deals with the tuning of your system.  It is
safe to leave these untouched. 
  

 Server connection idle timeout (in seconds) [900]: 
 Maximum concurrent sessions [20]: 
 Maximum message length [2147483647]: 
 Minimum number of worker threads [5]: 
 Maximum number of worker threads [256]: 
 Server-to-server networking password [xxxxx]: 
   
  


The "Server connection idle timeout" is for the connection between client
and server software.  It is not an idle timer for the user interface.
900 seconds (15 minutes) is the default and a sane setting. 

"Maximum concurrent sessions" is the highest number of user sessions you
wish to allow on your system at any given time.  Citadel can scale to
hundreds of concurrent users, but if you have limited hardware or (more
likely) limited bandwidth, you might wish to set a maximum.  You can also
set it to zero for no limit. 

"Maximum message length" is just that.  This could be a good way to
prevent enormous multimedia files from finding their way into your
message base. 

The minimum and maximum number of worker threads can be tuned to your
liking.  Citadel will attempt to keep one worker thread running per
session, within these constraints.  You should be aware that due to the
use of the worker thread model, Citadel can handle a alarge number of
concurrent sessions with a much smaller thread pool.  If you don't know
the programming theory behind multithreaded servers, you should leave
these parameters alone. 

The "server-to-server networking password" may be set to some secret value
to allow authenticated networking between Citadel servers. 
  

    The final set of options deals with the purging or expiry of old
objects off the system, and the new smtp/pop settings. 
  
Please note:  POP and SMTP are now disabled  by default.  In order to use
those two citadel servers you'll have to enable them manually.  

 POP3 server port (-1 to disable) [-1]: 
 SMTP server port (-1 to disable) [-1]: 
 Default user purge time (days) [61]: 
 Default room purge time (days) [21]: 
 System default message expire policy (? for list) [2]: 
 Keep how many messages online? [150]: 
 Save this configuration? Yes 
  


New settings to (.A)ide (S)ystem (G)eneral: 

POP/SMTP settings. Citadel is now capable of being it's own internet
e-mail server (smtp) or pop server. If you want that functionality, enter
in the correct ports. Normally this will be 110 for pop or 25 for smtp. More on this is in mailsetup.html. 

Any user who does not log in for the period specified in "Default user
purge time" will be deleted the next time a purge is run.  This setting
may be modified on a per-user basis. 

"Default room purge time" behaves the same way, and may also be modified
on a per-room basis. 

"System default message expire policy" defines the way in which old
messages are expired (purged) off the system.  You can specify any of: 

     Purge by age (specify in days) 
     Purge by message count in the room (specify number of messages) 
     Do not purge at all 

  Again, this setting may be overridden on a per-floor basis, and the
floor setting may be overridden on a per-room basis. 
  

    When you're done, enter "Yes" to confirm the changes, or "No" to abort. 
