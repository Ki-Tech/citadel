                BIDIRECTIONAL MAILING LIST GATEWAY INSTRUCTIONS
 
   Citadel/UX now has the ability to host a room on the BBS as a
bidirectional gateway to an Internet mailing list.  This makes it convenient
for the entire BBS community to have reading and posting access to a mailing
list without each member having to subscribe to the list.  This document
describes the procedure for setting up such functionality.
 
   Here's the prerequisite: you must be using Citadel as your system's local
mail delivery agent.  Please refer to network.doc for information on how to
do this.  Before attempting a mailing list, make sure that you can send and
receive regular Internet e-mail from your Citadel system.
 
   As you may or may not know, once Citadel is your e-mail system, each room
on the system has an e-mail address that may be used to post to the room
from anywhere on the Internet.  That address is of the form
"room_roomname@yourhost.dom", where "roomname" is the name of the room
(spaces replaced by underscores) and "yourhost.dom" is your fully-qualified
domain name.
 
   The first step is to create a room for the list and then subscribe that
room to the list.  The procedure for subscribing to a list depends on what
type of software the list server is running, and is beyond the scope of this
document.  For the purpose of example, let us suppose that you wish to
subscribe to the "Broccoli Advocates" mailing list, and you've discovered
that the list administrator is at broccoli-request@stalks.com and messages
to be posted to the list should be mailed to broccoli@stalks.com.  Let us
further suppose that your BBS is at mybbs.org.
 
   So you create a room called "Broccoli Advocates".  Then, because you're a
conscientous system administrator, you give the room an Info file which
warns users that all messages posted to the room will be posted to the list.
 
   You then send e-mail to the list administrator at
broccoli-request@stalks.com requesting that the address
"room_broccoli_advocates@mybbs.org" be added to the list.  Once the
administrator sets this up, the receiving end of the list is set up.  Note
that if a receive-only setup is all you want, you can stop here and you're
done.
 
   Now you have to set things up for sending.   The first thing you have to
do is set up the file "mailinglists" which resides in the "network"
subdirectory, which holds a table of list addresses associated with each
room.  Each line is of the form
 
 list-address,Room Name
 
 ...one room per line.  You'll use this same file to set up all mailing list
references.  So for our example, the line
 
 broccoli@stalks.com,Broccoli Advocates
 
 should be added.  In other words, messages originating from the "Broccoli
Advocates" room will be mailed to broccoli@stalks.com.
 
 The next thing to do is create a file in the "network/systems" subdirectory
which spools out new messages.  Create a file "network/systems/mailinglists"
which looks like this:
 
 mailinglist <%s
 Broccoli Advocates
 0
 
 Note that one systems entry may be used for all mailing lists to which you
subscribe.  Just keep adding any rooms (refer to network.doc for the
procedure) that are mapped to mailing lists.
 
 Now you're done!  Just do a "netproc mailinglists" or "netproc all" on a
regular basis (probably using cron or a similar scheduling utility) to batch
up new messages and send them out on a regular basis.
 
  
 NOTES ABOUT MAILING LISTS:
 
   Since many listservers will only accept postings from e-mail addresses
which are subscribed to the list, the mailing list gateway software sets the
sending address of each message to the address of the room.  The "full name"
portion of the address will remain intact.  So the posted messages will have
headers which look like this:
 
 From: room_broccoli_advocates@mybbs.org (Joe User)
 To: broccoli@stalks.org
 
   This ensures that messages are properly posted, but it makes it difficult
for other members of the list to learn the correct e-mail addresses of the
users on your system.  However, since there's so much spam around these
days, that's probably just as well anyway.
 
   To prevent loops, the mailing list gateway software only spools out
messages which originated on _your_ system.  This implies that it is not
possible to carry a gatewayed room on any type of Citadel network.
 
 
   Well, that's just about it.  If you have any comments, suggestions, or
questions, please visit UNCENSORED! BBS, either on the Internet at
uncnsrd.mt-kisco.ny.us or via dialup at 914-244-3252.
